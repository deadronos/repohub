---
post_title: "TASK005 Admin Project Drag Reorder"
author1: "AI Assistant"
post_slug: "task005-admin-project-drag-reorder"
microsoft_alias: "n/a"
featured_image: "https://example.com/placeholder.png"
categories: ["Engineering"]
tags: ["tasks", "admin", "dnd", "ordering"]
ai_note: "Generated by AI with user guidance."
summary: "Implementation plan and tracking for drag-and-drop project ordering."
post_date: "2025-12-18"
---

## TASK005 - Admin Project Drag Reorder

**Status:** Completed  
**Added:** 2025-12-18  
**Updated:** 2025-12-18  

## Original Request

Implement a global drag-and-drop ordering experience in the admin dashboard with auto-save on drop and persistent ordering in Supabase. Add a design doc and task plan first, then implement.

## Thought Process

We can add a `sort_order` column to `projects`, update list queries to order by it, and add a server action to persist ordering. Use `@dnd-kit` with a drag handle to avoid conflict with selection and edit actions. Optimistically reorder on drop, revert on error, and show a saving state.

## Implementation Plan

1. Add `sort_order` to schema and update project type + list queries.
2. Add ordering helpers and server action to persist order.
3. Implement drag-and-drop UI in `AdminDashboard` with optimistic updates and auto-save.
4. Update tests and fixtures for the new field; add unit coverage for ordering helpers.
5. Update task index and record validation results.

## Progress Tracking

**Overall Status:** Completed - 100%

### Subtasks

| ID | Description | Status | Updated | Notes |
| --- | --- | --- | --- | --- |
| 1.1 | Draft design doc and task plan | Complete | 2025-12-18 | DES004 created |
| 1.2 | Schema, type, query, and server action updates | Complete | 2025-12-18 | Added sort_order and reorder action |
| 1.3 | Admin drag-and-drop UI with autosave | Complete | 2025-12-18 | DnD handle + autosave |
| 1.4 | Tests and fixtures updated | Complete | 2025-12-18 | Added unit tests for ordering |
| 1.5 | Validation and handoff notes | Complete | 2025-12-18 | Ran vitest |

## Progress Log

### 2025-12-18

- Created design spec `memory/designs/DES004-admin-project-drag-reorder.md`.
- Initialized task plan and subtasks.
- Added `sort_order` schema, query ordering, and server action persistence.
- Implemented admin drag-and-drop ordering with autosave feedback.
- Added ordering helper tests and updated gallery fixtures.
- Ran `npm run test`.
- Ran `npm run typecheck`.

### 2025-12-19

- Switched reorder persistence to update-only to prevent accidental inserts.
- Ran `npm run lint` and `npm run test`.
